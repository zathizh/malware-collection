import sys, os
if (len(sys.argv)) != 2:
    print("[*] usage : " + str(sys.argv[0]) + " <obfustcated file>")
    exit()

_FILE = sys.argv[1]

if not (os.path.isfile(_FILE)):
    print("[-]" + _FILE + " does not exists")
    exit()

_OUTFILE = _FILE.split(".")[0] + ".exe"

if (os.path.isfile(_OUTFILE)):
    if (os.access(os.getcwd(), os.W_OK)):
        os.remove(_OUTFILE)
        print("[+] " + _OUTFILE + " Removed")
    else:
        print("[-] Cannot delete " + _OUTFILE)
        exit()

print("[+] Deobsfucation Started : " + _FILE)
_d_obs = ""
with open(_FILE, "rb") as ifp:
    for x in ifp.read():
        _d_obs = _d_obs + (''.join([chr(ord(x) ^ 0xFF)]))
file(_OUTFILE, "wb").write(_d_obs)
print("[+] Deobsfucation Completed : " + _OUTFILE)
